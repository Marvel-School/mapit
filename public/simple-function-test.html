<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Function Test</title>
    <meta name="google-maps-api-key" content="AIzaSyDsR974k1b4C4zkmFjFFYR3eSX3HWJ66A0">
</head>
<body>
    <h1>Simple getGoogleMapsApiKey() Function Test</h1>
    <div id="test-results">
        <p>Loading...</p>
    </div>
    
    <script src="/js/main.js"></script>
    <script>
        function checkFunction() {
            const results = document.getElementById('test-results');
            
            console.log('Checking function...');
            console.log('typeof getGoogleMapsApiKey:', typeof getGoogleMapsApiKey);
            console.log('window object keys containing "google":', Object.keys(window).filter(k => k.toLowerCase().includes('google')));
            
            if (typeof getGoogleMapsApiKey === 'function') {
                const key = getGoogleMapsApiKey();
                results.innerHTML = `
                    <p style="color: green;">✅ SUCCESS: Function found!</p>
                    <p>Returned key: <code>${key ? key.substring(0, 10) + '...' : 'null'}</code></p>
                `;
            } else {
                results.innerHTML = `
                    <p style="color: red;">❌ FAILED: Function not found</p>
                    <p>All functions in window: ${Object.getOwnPropertyNames(window).filter(name => typeof window[name] === 'function').slice(0, 10).join(', ')}</p>
                `;
            }
        }
        
        // Test immediately
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, testing immediately...');
            checkFunction();
            
            // Test again after delays
            setTimeout(() => {
                console.log('Testing after 1 second...');
                checkFunction();
            }, 1000);
            
            setTimeout(() => {
                console.log('Testing after 3 seconds...');
                checkFunction();
            }, 3000);
        });
        
        // Test when window loads
        window.addEventListener('load', function() {
            console.log('Window fully loaded, testing...');
            checkFunction();
        });
    </script>
</body>
</html>
